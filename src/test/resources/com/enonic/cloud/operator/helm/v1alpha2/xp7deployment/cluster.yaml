apiVersion: enonic.cloud/v1alpha2
kind: Xp7Deployment
metadata:
  name: mycloud-mysolution-myenv-myservice
  namespace: mycloud-mysolution-myenv-myservice
  labels:
    cloud: mycloud
    solution: mysolution
    environment: myenv
    service: myservice
spec:
  enabled: true
  xpVersion: 7.1.2

  nodesSharedDisks:
    blobstore: 1Gi
    snapshots: 2Gi

  nodeGroups:
    master:
      data: false
      master: true
      replicas: 3
      resources:
        cpu: "1"
        memory: 1Gi
        disks:
          export: 3Gi
    data:
      data: true
      master: false
      replicas: 2
      resources:
        cpu: "2"
        memory: 2Gi
        disks:
          export: 4Gi
          index: 5Gi
      env:
        JAVA_OPTS: "My java opts"
    frontend:
      data: false
      master: false
      replicas: 3
      resources:
        cpu: "3"
        memory: 3Gi
        disks:
          export: 6Gi
          work: 7Gi
      env:
        CUSTOM_ENV: "myenvvar"