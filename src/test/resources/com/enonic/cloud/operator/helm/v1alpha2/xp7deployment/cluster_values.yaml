---
settings:
  nodeGroupAntiAffinity: false
allNodesKey: "all"
defaultLabels:
  cloud: "mycloud"
  solution: "mysolution"
  environment: "myenv"
  service: "myservice"
labelKeys:
  managed: "enonic.managed"
  nodeGroup: "enonic.nodeGroup"
imageTemplate: "enonic/xp:%s-ubuntu"
annotationKeys:
  applyPriority: "enonic.applyPriority"
  vHostName: "enonic.vhost"
  alwaysOverwrite: "enonic.alwaysOverwrite"
  neverOverwrite: "enonic.neverOverwrite"
deployment:
  suPass: "password"
  suPassHash: "b109f3bbbc244eb82441917ed06d618b9008dd09b3befd1b5e07394c706a8bb980b1d7785e5976ec049b46df5f1326af5a2ea6d103fd07c95385ffab0cacbc86"
  minimumDataNodes: 2
  clustered: true
  name: "mycloud-mysolution-myenv-myservice"
  namespace: "mycloud-mysolution-myenv-myservice"
  minimumMasterNodes: 2
  spec:
    enabled: true
    xpVersion: "7.1.2"
    nodesSharedDisks:
    - name: "blobstore"
      size: "1Gi"
    - name: "snapshots"
      size: "2Gi"
    nodeGroups:
    - name: "master"
      data: false
      master: true
      replicas: 3
      env:
      - name: "JAVA_OPTS"
        value: "-Djava.security.properties=/enonic-xp/home/extra-config/java.security.properties\
          \ -XX:+UseContainerSupport -XX:MinRAMPercentage=20 -XX:InitialRAMPercentage=30\
          \ -XX:MaxRAMPercentage=75 -XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled\
          \ -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=60\
          \ -XX:+ScavengeBeforeFullGC -XX:+CMSScavengeBeforeRemark -XX:-HeapDumpOnOutOfMemoryError\
          \ -XX:HeapDumpPath=/enonic-xp/home/data/oom.hprof"
      resources:
        cpu: "1"
        memory: "1Gi"
        disks:
        - name: "export"
          size: "3Gi"
    - name: "data"
      data: true
      master: false
      replicas: 2
      env:
      - name: "JAVA_OPTS"
        value: "My java opts"
      resources:
        cpu: "2"
        memory: "2Gi"
        disks:
        - name: "export"
          size: "4Gi"
        - name: "index"
          size: "5Gi"
    - name: "frontend"
      data: false
      master: false
      replicas: 3
      env:
      - name: "CUSTOM_ENV"
        value: "myenvvar"
      - name: "JAVA_OPTS"
        value: "-Djava.security.properties=/enonic-xp/home/extra-config/java.security.properties\
          \ -XX:+UseContainerSupport -XX:MinRAMPercentage=20 -XX:InitialRAMPercentage=30\
          \ -XX:MaxRAMPercentage=50 -XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled\
          \ -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=60\
          \ -XX:+ScavengeBeforeFullGC -XX:+CMSScavengeBeforeRemark -XX:-HeapDumpOnOutOfMemoryError\
          \ -XX:HeapDumpPath=/enonic-xp/home/data/oom.hprof"
      resources:
        cpu: "3"
        memory: "3Gi"
        disks:
        - name: "export"
          value: "6Gi"
        - name: "work"
          value: "7Gi"
ownerReferences:
- apiVersion: "enonic.cloud/v1alpha2"
  kind: "Xp7Deployment"
  blockOwnerDeletion: false
  controller: true
  name: "mycloud-mysolution-myenv-myservice"
